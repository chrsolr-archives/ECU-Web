!function(){"use strict";Parse.initialize("Mw0dWtJQYVzYlA4vHybSNmuyLJSjzpEpTarhZMEQ","gXEJhvTtHQcSNrryJ7u9IK4euVWOu00QEGnaK7ow"),angular.module("services",[]),angular.module("controllers",[]),angular.module("filters",[]);var e=["services","controllers","filters","ngRoute","ui.bootstrap","angular-loading-bar","ngAnimate","ngTweets"];angular.module("app",e).config(["$routeProvider","$locationProvider","cfpLoadingBarProvider","$sceProvider",function(e,t,n,r){e.when("/",{templateUrl:"/views/home.html",caseInsensitiveMatch:!0}).when("/news",{templateUrl:"/views/news.html",caseInsensitiveMatch:!0}).when("/news/details/:permalink",{templateUrl:"/views/news-details.html",caseInsensitiveMatch:!0}).when("/videos",{templateUrl:"/views/videos.html",caseInsensitiveMatch:!0}).when("/videos/details/:id",{templateUrl:"/views/videos-details.html",caseInsensitiveMatch:!0}).when("/about",{templateUrl:"/views/about.html",caseInsensitiveMatch:!0}).when("/policies",{templateUrl:"/views/policies.html",caseInsensitiveMatch:!0}).when("/termsofuse",{templateUrl:"/views/terms-of-use.html",caseInsensitiveMatch:!0}).otherwise({redirectTo:"/"}),t.html5Mode(!0),t.hashPrefix("!"),n.includeSpinner=!1,r.enabled(!1)}]).run(["$rootScope","$location","NavigationServices",function(e,t,n){e.$on("$routeChangeStart",function(e,t,r){n.closeSideBar()})}])}(),function(){"use strict";angular.module("services").factory("NavigationServices",["$rootScope",function(e){var t=!1;return{toggleSideBar:function(){t=!t,e.$broadcast("navigation:sidebar",t)},getSideBarState:function(){return t},closeSideBar:function(){t=!1,e.$broadcast("navigation:sidebar",t)},openSideBar:function(){t=!0,e.$broadcast("navigation:sidebar",t)}}}])}(),function(){"use strict";angular.module("services").factory("GlobalServices",["$http","$q",function(e,t){return{getFeaturedVideo:function(){var e=t.defer();if(1===(new Date).getUTCDay()&&(new Date).getUTCHours()>=23||2===(new Date).getUTCDay()&&(new Date).getUTCHours()<=2)e.resolve({title:"Live Stream",url:"http://www.ustream.tv/embed/10266764?v=3&amp;wmode=direct"});else{var n=Parse.Object.extend("FeaturedVideo"),r=new Parse.Query(n);r.first({success:function(t){e.resolve({title:"Video del Dia",url:t.get("url")})},error:function(t){e.reject("Error: "+t.code+" "+t.message)}})}return e.promise},subscribe:function(n){var r=t.defer();return e.post("/api/subscribe",{email:n}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},contactUs:function(n){var r=t.defer();return e.post("/api/contactus",{contact:n}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}}])}(),function(){"use strict";angular.module("services").factory("NewsServices",["$q",function(e){return{getNews:function(t){var n=e.defer(),r=t||50,o=Parse.Object.extend("News"),i=new Parse.Query(o);return i.descending("createdAt"),i.limit(r),i.find({success:function(e){var t=[];angular.forEach(e,function(e,n){t.push(e.toJSON())}),n.resolve(t)},error:function(e){n.reject("Error: "+e.code+" "+e.message)}}),n.promise},getNewsByPermalink:function(t){var n=e.defer(),r=Parse.Object.extend("News"),o=new Parse.Query(r);return o.equalTo("permalink",t),o.first({success:function(e){n.resolve(e.toJSON())},error:function(e){n.reject("Error: "+e.code+" "+e.message)}}),n.promise}}}])}(),function(){"use strict";angular.module("services").factory("YoutubeServices",["$http","$q",function(e,t){return{getYouTubeVideos:function(n,r){var o=t.defer();return n=n||10,r=r||"",e.get("/api/youtube?max="+n+"&page="+r).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},getYouTubeVideoById:function(n){var r=t.defer();return e.get("/api/youtube/"+n).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}}])}(),function(){"use strict";angular.module("services").factory("SoundcloudServices",["$http","$q",function(e,t){return{getSoundcouldSongs:function(){var n=t.defer();return e.get("/api/soundcloud").success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}}])}(),function(){"use strict";angular.module("controllers").controller("GlobalController",["$location","NavigationServices","$uibModal","$uibModalStack","GlobalServices","$interval","$window","$document",function(e,t,n,r,o,i,s,c){function a(){function e(){var e=t.scrollTop();Math.abs(o-e)<=u||(e>o&&e>n.outerHeight()?(n.addClass("navigation-bar-toggle"),r.removeClass("navigation-bar-sidebar-toggle")):e+t.height()<angular.element(c).height()&&n.removeClass("navigation-bar-toggle"),o=e)}var t=angular.element(s),n=angular.element(document.querySelector(".navigation-bar-wrapper")),r=angular.element(document.querySelector(".navigation-bar-sidebar-wrapper")),o=0,a=!1,u=5;t.bind("scroll",function(){a=!0}),i(function(){a&&(e(),a=!1)},250)}var u=this;u.contactUs=function(){n.open({templateUrl:"/views/contact-us-modal.html",controller:"GlobalController",controllerAs:"global"}),t.closeSideBar()},u.sendContactUs=function(){o.contactUs(u.contact).then(function(){r.dismissAll()})},a()}])}(),function(){"use strict";angular.module("controllers").controller("NavigationController",["$scope","$location","NavigationServices","$uibModal","$uibModalStack",function(e,t,n,r,o){var i=this;i.isSideBarOpen=n.getSideBarState(),i.logout=function(){},i.toggleSideBar=function(){n.toggleSideBar()},e.$on("navigation:sidebar",function(e,t){i.isSideBarOpen=t})}])}(),function(){"use strict";angular.module("controllers").controller("HomeController",["$sce","GlobalServices","NewsServices","YoutubeServices","SoundcloudServices","tweets",function(e,t,n,r,o,i){var s=this;t.getFeaturedVideo().then(function(e){s.featuredVideo=e}),n.getNews(8).then(function(e){s.news=e}),i.get({widgetId:"680180390867283968"}).then(function(e){s.tweets=e.data.tweets}),r.getYouTubeVideos().then(function(e){s.youtube=e}),o.getSoundcouldSongs().then(function(e){s.songs=e.data}),s.sanitizeHTML=function(t){return e.trustAsHtml(t)},s.subscribe=function(){t.subscribe(s.subscribeEmail).then(function(e){!e.success,alert(e.message),s.subscribeEmail=""})}}])}(),function(){"use strict";angular.module("controllers").controller("NewsController",["NewsServices",function(e){var t=this;e.getNews(50).then(function(e){t.news=e})}])}(),function(){"use strict";angular.module("controllers").controller("NewsDetailsController",["NewsServices","$routeParams","$sce",function(e,t,n){function r(){document.title=o.news.title,document.querySelector('meta[property="og:title"]').setAttribute("content",o.news.title),document.querySelector('meta[property="og:type"]').setAttribute("content","website"),document.querySelector('meta[property="og:url"]').setAttribute("content","http://ecu.herokuapp.com/news/details/"+o.news.permalink),document.querySelector('meta[property="og:image"]').setAttribute("content",o.news.imageUrl),document.querySelector('meta[property="og:description"]').setAttribute("content",o.news.description),document.querySelector('meta[property="twitter:title"]').setAttribute("content",o.news.title),document.querySelector('meta[property="twitter:card"]').setAttribute("content",o.news.description),document.querySelector('meta[property="twitter:url"]').setAttribute("content","http://ecu.herokuapp.com/news/details/"+o.news.permalink),document.querySelector('meta[property="twitter:image"]').setAttribute("content",o.news.imageUrl),document.querySelector('meta[property="twitter:description"]').setAttribute("content",o.news.description)}var o=this;e.getNewsByPermalink(t.permalink).then(function(e){o.news=e,r()}),o.sanitizeHTML=function(e){return n.trustAsHtml(e)}}])}(),function(){"use strict";angular.module("controllers").controller("VideosController",["YoutubeServices","$window",function(e,t){function n(){t.scrollTo(0,0),r()}function r(){angular.element(document.querySelector("#videos-content")).removeClass("fadeIn"),angular.element(document.querySelector("#videos-content")).addClass("fadeOut")}function o(){angular.element(document.querySelector("#videos-content")).removeClass("fadeOut").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){angular.element(document.querySelector("#videos-content")).addClass("fadeIn")})}var i=this;e.getYouTubeVideos(50).then(function(e){i.videos=e.videos,i.prev=e.prev,i.next=e.next,o()}),i.previousVideos=function(){n(),i.prev&&e.getYouTubeVideos(50,i.prev).then(function(e){i.videos=e.videos,i.prev=e.prev,i.next=e.next,o()})},i.nextVideos=function(){n(),i.next&&e.getYouTubeVideos(50,i.next).then(function(e){i.videos=e.videos,i.prev=e.prev,i.next=e.next,o()})}}])}(),function(){"use strict";angular.module("controllers").controller("VideosDetailsController",["$routeParams","YoutubeServices",function(e,t){var n=this;t.getYouTubeVideoById(e.id).then(function(e){n.video=e.data})}])}();