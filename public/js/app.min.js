!function(){"use strict";angular.module("services",[]),angular.module("controllers",[]),angular.module("filters",[]),angular.module("directives",[]);var modules=["services","controllers","filters","directives","ngRoute","ui.bootstrap","angular-loading-bar","ngTweets","vcRecaptcha"];angular.module("app",modules)}(),function(){"use strict";function config($routeProvider,$locationProvider,cfpLoadingBarProvider,$sceProvider){$routeProvider.when("/",{templateUrl:"/views/home.html",caseInsensitiveMatch:!0,controller:"HomeController",controllerAs:"vm"}).when("/news",{templateUrl:"/views/news.html",caseInsensitiveMatch:!0,controller:"NewsController",controllerAs:"vm",resolve:{initData:["RouteResolverServices",function(RouteResolverServices){return RouteResolverServices.resolveNews(50)}]}}).when("/news/details/:permalink",{templateUrl:"/views/news-details.html",caseInsensitiveMatch:!0,controller:"NewsDetailsController",controllerAs:"vm",resolve:{initData:["$route","RouteResolverServices",function($route,RouteResolverServices){return RouteResolverServices.resolveNewsDetails($route.current.params.permalink)}]}}).when("/videos",{templateUrl:"/views/videos.html",caseInsensitiveMatch:!0,controller:"VideosController",controllerAs:"vm",resolve:{initData:["RouteResolverServices",function(RouteResolverServices){return RouteResolverServices.resolveVideos(50)}]}}).when("/videos/details/:id",{templateUrl:"/views/videos-details.html",caseInsensitiveMatch:!0,controller:"VideosDetailsController",controllerAs:"vm",resolve:{initData:["$route","RouteResolverServices",function($route,RouteResolverServices){return RouteResolverServices.resolveVideosDetails($route.current.params.id)}]}}).when("/about",{templateUrl:"/views/about.html",caseInsensitiveMatch:!0}).when("/policies",{templateUrl:"/views/policies.html",caseInsensitiveMatch:!0}).when("/termsofuse",{templateUrl:"/views/terms-of-use.html",caseInsensitiveMatch:!0}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!0),cfpLoadingBarProvider.includeSpinner=!1,$sceProvider.enabled(!1)}angular.module("app").config(config),config.$inject=["$routeProvider","$locationProvider","cfpLoadingBarProvider","$sceProvider"]}(),function(){"use strict";function run($rootScope,NavigationServices,GlobalServices){GlobalServices.getParseKeys().then(function(data){Parse.initialize(data.app_key,data.client_key)}),$rootScope.$on("$routeChangeStart",function(event,next,current){NavigationServices.closeSideBar()})}angular.module("app").run(run),run.$inject=["$rootScope","NavigationServices","GlobalServices"]}();var app;!function(app){var directives;!function(directives){var MediaImageDirective=function(){function MediaImageDirective($scope){if(this.$scope=$scope,$scope.destinationUrl){var url=$scope.media.permalink||$scope.media.id;$scope.media.url=$scope.destinationUrl+url}}return MediaImageDirective.$inject=["$scope"],MediaImageDirective}();directives.MediaImageDirective=MediaImageDirective,angular.module("directives").directive("ecuMediaImage",function(){return{scope:{destinationUrl:"@",media:"="},restrict:"E",templateUrl:"/js/directives/media/media-image-directive.html",controller:MediaImageDirective}})}(directives=app.directives||(app.directives={}))}(app||(app={}));var app;!function(app){var directives;!function(directives){var NavbarDirective=function(){function NavbarDirective($scope,NavigationServices,$interval,$window,$document){this.NavigationServices=NavigationServices,this.$interval=$interval,this.$window=$window,this.$document=$document;var _this=this;_this.isSideBarOpen=_this.NavigationServices.getSideBarState(),$scope.$on("navigation:sidebar",function(event,data){_this.isSideBarOpen=data}),_this.navbar()}return NavbarDirective.prototype.toggleSideBar=function(){this.NavigationServices.toggleSideBar()},NavbarDirective.prototype.navbar=function(){function onHasScrolled(){var top=docWindow.scrollTop();Math.abs(lastPosition-top)<=delta||(top>lastPosition&&top>$nav.outerHeight()?($nav.addClass("navigation-bar-toggle"),$sideBar.removeClass("navigation-bar-sidebar-toggle")):top+docWindow.height()<angular.element(_this.$document).height()&&$nav.removeClass("navigation-bar-toggle"),lastPosition=top)}var _this=this,docWindow=angular.element(_this.$window),$nav=_this.$document.find(".navigation-bar-wrapper"),$sideBar=_this.$document.find(".navigation-bar-sidebar-wrapper"),lastPosition=0,isScrolled=!1,delta=5;docWindow.bind("scroll",function(){isScrolled=!0}),_this.$interval(function(){isScrolled&&(onHasScrolled(),isScrolled=!1)},250)},NavbarDirective.$inject=["$scope","NavigationServices","$interval","$window","$document"],NavbarDirective}();directives.NavbarDirective=NavbarDirective,angular.module("directives").directive("ecuNavbar",function(){return{scope:!0,restrict:"E",templateUrl:"/js/directives/navbar/navbar-directive.html",controller:NavbarDirective,controllerAs:"navbar",transclude:!0}})}(directives=app.directives||(app.directives={}))}(app||(app={}));var app;!function(app){var services;!function(services){"use strict";var NavigationServices=function(){function NavigationServices($rootScope){this.$rootScope=$rootScope,this.isSideBarOpen=!1}return NavigationServices.prototype.toggleSideBar=function(){this.isSideBarOpen=!this.isSideBarOpen,this.$rootScope.$broadcast("navigation:sidebar",this.isSideBarOpen)},NavigationServices.prototype.getSideBarState=function(){return this.isSideBarOpen},NavigationServices.prototype.closeSideBar=function(){this.isSideBarOpen=!1,this.$rootScope.$broadcast("navigation:sidebar",this.isSideBarOpen)},NavigationServices.prototype.openSideBar=function(){this.isSideBarOpen=!0,this.$rootScope.$broadcast("navigation:sidebar",this.isSideBarOpen)},NavigationServices}();angular.module("services").factory("NavigationServices",["$rootScope",function($rootScope){return new NavigationServices($rootScope)}])}(services=app.services||(app.services={}))}(app||(app={}));var app;!function(app){var services;!function(services){"use strict";var RouteResolverServices=function(){function RouteResolverServices($q,YoutubeServices,NewsServices){this.$q=$q,this.YoutubeServices=YoutubeServices,this.NewsServices=NewsServices}return RouteResolverServices.prototype.resolveVideosDetails=function(videoId){return this.$q.all([this.YoutubeServices.getYouTubeVideoById(videoId)]).then(function(results){return{video:results[0].data}})},RouteResolverServices.prototype.resolveVideos=function(max){return this.$q.all([this.YoutubeServices.getYouTubeVideos(max)]).then(function(results){return{data:results[0]}})},RouteResolverServices.prototype.resolveNews=function(max){return this.$q.all([this.NewsServices.getNews(max)]).then(function(results){return{data:results[0]}})},RouteResolverServices.prototype.resolveNewsDetails=function(permalink){return this.$q.all([this.NewsServices.getNewsByPermalink(permalink)]).then(function(results){return{data:results[0]}})},RouteResolverServices}();angular.module("services").factory("RouteResolverServices",["$q","YoutubeServices","NewsServices",function($q,YoutubeServices,NewsServices){return new RouteResolverServices($q,YoutubeServices,NewsServices)}])}(services=app.services||(app.services={}))}(app||(app={}));var app;!function(app){var services;!function(services){var GlobalServices=function(){function GlobalServices($http,$q){this.$http=$http,this.$q=$q}return GlobalServices.prototype.getFeaturedVideo=function(){var q=this.$q.defer();if(1===(new Date).getUTCDay()&&(new Date).getUTCHours()>=23||2===(new Date).getUTCDay()&&(new Date).getUTCHours()<=2)q.resolve({title:"Live Stream",url:"http://www.ustream.tv/embed/10266764?v=3&amp;wmode=direct"});else{var featuredVideo=Parse.Object.extend("FeaturedVideo"),query=new Parse.Query(featuredVideo);query.first({success:function(object){q.resolve({title:"Video del Dia",url:object.get("url")})},error:function(error){q.reject("Error: "+error.code+" "+error.message)}})}return q.promise},GlobalServices.prototype.subscribe=function(email){var q=this.$q.defer();return this.$http.post("/api/subscribe",{email:email}).success(function(data){q.resolve(data)}).error(function(error){q.reject(error)}),q.promise},GlobalServices.prototype.contactUs=function(contact){var q=this.$q.defer();return this.$http.post("/api/contactus",{contact:contact}).success(function(data){q.resolve(data)}).error(function(error){q.reject(error)}),q.promise},GlobalServices.prototype.getParseKeys=function(){var q=this.$q.defer();return this.$http.get("/api/parse").success(function(data){q.resolve(data)}).error(function(error){q.reject(error)}),q.promise},GlobalServices}();angular.module("services").factory("GlobalServices",["$http","$q",function($http,$q){return new GlobalServices($http,$q)}])}(services=app.services||(app.services={}))}(app||(app={}));var app;!function(app){var services;!function(services){"use strict";var NewsServices=function(){function NewsServices($q){this.$q=$q}return NewsServices.prototype.getNews=function(max){var q=this.$q.defer(),queryLimit=max||50,news=Parse.Object.extend("News"),query=new Parse.Query(news);return query.descending("createdAt"),query.limit(queryLimit),query.find({success:function(objects){var data=[];angular.forEach(objects,function(value,key){data.push(value.toJSON())}),q.resolve(data)},error:function(error){q.reject("Error: "+error.code+" "+error.message)}}),q.promise},NewsServices.prototype.getNewsByPermalink=function(permalink){var q=this.$q.defer(),news=Parse.Object.extend("News"),query=new Parse.Query(news);return query.equalTo("permalink",permalink),query.first({success:function(object){q.resolve(object.toJSON())},error:function(error){q.reject("Error: "+error.code+" "+error.message)}}),q.promise},NewsServices}();angular.module("services").factory("NewsServices",["$q",function($q){return new NewsServices($q)}])}(services=app.services||(app.services={}))}(app||(app={}));var app;!function(app){var services;!function(services){"use strict";var YoutubeServices=function(){function YoutubeServices($http,$q){this.$http=$http,this.$q=$q}return YoutubeServices.prototype.getYouTubeVideos=function(max,page){var q=this.$q.defer();return max=max||10,page=page||"",this.$http.get("/api/youtube?max="+max+"&page="+page).success(function(data){q.resolve(data)}).error(function(error){q.reject(error)}),q.promise},YoutubeServices.prototype.getYouTubeVideoById=function(id){var q=this.$q.defer();return this.$http.get("/api/youtube/"+id).success(function(data){q.resolve(data)}).error(function(error){q.reject(error)}),q.promise},YoutubeServices}();angular.module("services").factory("YoutubeServices",["$http","$q",function($http,$q){return new YoutubeServices($http,$q)}])}(services=app.services||(app.services={}))}(app||(app={}));var app;!function(app){var services;!function(services){"use strict";var SoundcloudServices=function(){function SoundcloudServices($http,$q){this.$http=$http,this.$q=$q}return SoundcloudServices.prototype.getSoundcloudSongs=function(){var q=this.$q.defer();return this.$http.get("/api/soundcloud").success(function(data){q.resolve(data)}).error(function(error){q.reject(error)}),q.promise},SoundcloudServices}();angular.module("services").factory("SoundcloudServices",["$http","$q",function($http,$q){return new SoundcloudServices($http,$q)}])}(services=app.services||(app.services={}))}(app||(app={})),function(){"use strict";angular.module("controllers").controller("GlobalController",["$scope","NavigationServices","$uibModal","$uibModalStack","GlobalServices",function($scope,NavigationServices,$uibModal,$uibModalStack,GlobalServices){var global=this;global.contactUs=function(){$uibModal.open({templateUrl:"/views/contact-us-modal.html",controller:"GlobalController",controllerAs:"global"}),NavigationServices.closeSideBar()},global.sendContactUs=function(){GlobalServices.contactUs(global.contact).then(function(){$uibModalStack.dismissAll()})},global.cancelContactUs=function(){$uibModalStack.dismissAll()},$scope.$on("navigation:sidebar",function(event,data){global.isSideBarOpen=data})}])}();var app;!function(app){var controllers;!function(controllers){var HomeController=function(){function HomeController($sce,GlobalServices,NewsServices,YoutubeServices,SoundcloudServices,tweets){this.$sce=$sce,this.GlobalServices=GlobalServices,this.NewsServices=NewsServices,this.YoutubeServices=YoutubeServices,this.SoundcloudServices=SoundcloudServices,this.tweets=tweets;var _this=this;_this.audio=document.createElement("audio"),_this.GlobalServices.getFeaturedVideo().then(function(data){_this.featuredVideo=data}),_this.NewsServices.getNews(8).then(function(data){_this.news=data}),_this.tweets.get({widgetId:"680180390867283968"}).then(function(data){_this.twitter=data.data.tweets}),_this.YoutubeServices.getYouTubeVideos(10).then(function(data){_this.youtube=data}),_this.SoundcloudServices.getSoundcloudSongs().then(function(data){_this.songs=data.data})}return HomeController.prototype.playTrack=function(index){var _this=this;return 0>index&&(index=0),index>=_this.songs.length&&(index=_this.songs.length-1),_this.selectedTrackIndex===index?(_this.audio.pause(),void _this.clearPlayTrackIcons()):(_this.selectedTrackIndex=index,_this.audio.setAttribute("src",_this.songs[index].stream_url),_this.audio.play(),void _this.togglePlayIcons(index))},HomeController.prototype.downloadTrack=function(url){window.open(url)},HomeController.prototype.sanitizeHTML=function(html){return this.$sce.trustAsHtml(html)},HomeController.prototype.subscribe=function(){var _this=this;_this.GlobalServices.subscribe(_this.subscribeEmail).then(function(data){!data.success,alert(data.message),_this.subscribeEmail=""})},HomeController.prototype.togglePlayIcons=function(index){this.clearPlayTrackIcons(),angular.element(document.querySelector(".sc-play-stop-"+index)).removeClass("pe-7s-play").addClass("pe-7s-close")},HomeController.prototype.clearPlayTrackIcons=function(){angular.element(document).find('[class*="sc-play-stop-"]').removeClass("pe-7s-close").addClass("pe-7s-play")},HomeController.$inject=["$sce","GlobalServices","NewsServices","YoutubeServices","SoundcloudServices","tweets"],HomeController}();angular.module("controllers").controller("HomeController",HomeController)}(controllers=app.controllers||(app.controllers={}))}(app||(app={}));var app;!function(app){var controllers;!function(controllers){var NewsController=function(){function NewsController(initData){var _this=this;_this.news=initData.data}return NewsController.$inject=["initData"],NewsController}();angular.module("controllers").controller("NewsController",NewsController)}(controllers=app.controllers||(app.controllers={}))}(app||(app={}));var app;!function(app){var controllers;!function(controllers){var NewsDetailsController=function(){function NewsDetailsController(initData,$sce){this.$sce=$sce;var _this=this;_this.news=initData.data}return NewsDetailsController.prototype.sanitizeHTML=function(html){return this.$sce.trustAsHtml(html)},NewsDetailsController.$inject=["initData","$sce"],NewsDetailsController}();angular.module("controllers").controller("NewsDetailsController",NewsDetailsController)}(controllers=app.controllers||(app.controllers={}))}(app||(app={}));var app;!function(app){var controllers;!function(controllers){"use strict";var VideosController=function(){function VideosController(initData,YoutubeServices,$window){this.YoutubeServices=YoutubeServices,this.$window=$window;var _this=this;_this.videos=initData.data.videos,_this.prev=initData.data.prev,_this.next=initData.data.next}return VideosController.prototype.previousVideos=function(){var _this=this;_this.reset(),_this.prev&&_this.YoutubeServices.getYouTubeVideos(50,_this.prev).then(function(data){_this.videos=data.videos,_this.prev=data.prev,_this.next=data.next,_this.animateIn()})},VideosController.prototype.nextVideos=function(){var _this=this;_this.reset(),_this.next&&_this.YoutubeServices.getYouTubeVideos(50,_this.next).then(function(data){_this.videos=data.videos,_this.prev=data.prev,_this.next=data.next,_this.animateIn()})},VideosController.prototype.reset=function(){var _this=this;_this.$window.scrollTo(0,0),_this.animateOut()},VideosController.prototype.animateOut=function(){angular.element(document.querySelector("#videos-content")).removeClass("fadeIn"),angular.element(document.querySelector("#videos-content")).addClass("fadeOut")},VideosController.prototype.animateIn=function(){angular.element(document.querySelector("#videos-content")).removeClass("fadeOut").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){angular.element(document.querySelector("#videos-content")).addClass("fadeIn")})},VideosController.$inject=["initData","YoutubeServices","$window"],VideosController}();angular.module("controllers").controller("VideosController",VideosController)}(controllers=app.controllers||(app.controllers={}))}(app||(app={}));var app;!function(app){var controllers;!function(controllers){"use strict";var VideosDetailsController=function(){function VideosDetailsController(initData){this.initData=initData,this.video=initData.video}return VideosDetailsController.$inject=["initData"],VideosDetailsController}();angular.module("controllers").controller("VideosDetailsController",VideosDetailsController)}(controllers=app.controllers||(app.controllers={}))}(app||(app={}));
//# sourceMappingURL=app.min.js.map